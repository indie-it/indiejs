<template name="mission">
	{{setTitle mission.name}}

	<div class="container-fluid missions-background-image">

		<div class="container-fluid hidden-xs breadcrumb-background">
			<ol class="breadcrumb">
				<li><a href="{{pathFor route='home'}}"><i class="fa fa-home" aria-hidden="true"></i></a></li>
				<li><a href="{{pathFor route='missionsList'}}">Liste des missions</a></li>
				<li class="active">{{mission.name}}</li>
			</ol>
		</div>

		<div class="container background-layer">

			{{#if isAdmin }}

			<div class="row">
				<div class="col-md-4">
					<h3><span class="label label-primary"><i class="fa fa-cogs" aria-hidden="true"></i> {{getCurrentState}}</span></h3>
				</div>
				<div class="col-md-8">
					<h3 class="pull-right">
						{{#if canValidate}}<a id="action-validate" class="btn btn-success" href="#" role="button"><i class="fa fa-check" aria-hidden="true"></i> Valider</a>{{/if}}
						{{#if canAccept}}<a id="action-accept" class="btn btn-primary" href="#" role="button"><i class="fa fa-user-circle" aria-hidden="true"></i> Affecter un indépendant</a>{{/if}}
						{{#if canArchive}}<a id="action-archive" class="btn btn-danger" href="#" role="button"><i class="fa fa-archive" aria-hidden="true"></i> Archiver</a>{{/if}}
					</h3>
				</div>
			</div>

			{{#if canAccept}}
			<div id="select-freelancer" class="row" style="display: none;">
				<div class="container">
					{{> tabular table=TabularTables.UserProfiles class="table table-striped table-bordered"}}
				</div>
			</div>
			{{/if}}
			<hr />
			{{/if}}

			<div class="row">
				<div class="col-md-12">
					<h3>{{mission.name}}</h3>
				</div>
			</div>

			<div class="row">

				<!-- A GAUCHE -->
				<div class="col-sm-8 col-md-9">

					{{#if mission.categories}}
					<p class="h4">
						<i class="fa fa-tags" aria-hidden="true"></i> {{#each mission.categories}}<span class="label label-default">{{this}}</span> {{/each}}
					</p>
					{{/if}}

					<p class="h5">
						<i class="fa fa-tags" aria-hidden="true"></i>
						{{#each mission.technos}}<span class="label label-info">{{this}}</span> {{/each}}
					</p>
					<p class="h5">
						<i class="fa fa-tags" aria-hidden="true"></i>
						{{#if mission.level}}<span class="label label-primary">{{mission.level}}</span>{{/if}}
						{{#if mission.type}}<span class="label label-primary">{{mission.type}}</span>{{/if}}
					</p>
					<br />
					{{#if mission.shortDescription}}<h4><small>{{mission.shortDescription}}</small></h4>{{/if}}

					<div>{{#markdown}}{{mission.description}}{{/markdown}}</div>

				</div>

				<!-- A DROITE -->
				<div class="col-sm-4 col-md-3">
					<div class="alert alert-info" role="alert">
						<p class="hidden-xs">
							{{#each mission.categories}}<span class="label label-default">{{this}}</span> {{/each}}
							{{#if mission.type}}<span class="label label-primary">{{mission.type}}</span>{{/if}}
							{{#if mission.level}}<span class="label label-primary">{{mission.level}}</span>{{/if}}
							{{#each mission.technos}}<span class="label label-info">{{this}}</span> {{/each}}
						</p>


						{{#if mission.organization}}<p><i class="fa fa-building-o fa-fw"></i> {{mission.organization}}</p>{{/if}}
						{{#if mission.location}}<p><i class="fa fa-map-marker fa-fw"></i> {{mission.location}}</p>{{/if}}
						<p><i class="fa fa-calendar fa-fw"></i> Début {{getMissionStart}}</p>
						{{#if mission.duration}}<p><i class="fa fa-clock-o fa-fw"></i> {{getMissionDuration}}</p>{{/if}}
						{{#if mission.averageDailyRate}}<p><i class="fa fa-eur fa-fw"></i> {{mission.averageDailyRate}}€/j</p>{{/if}}
					</div>
				</div>
			</div>

			{{#if canVote}}

			<div class="row">
				<div class="col-md-12">
					<h3><i class="fa fa-star-o fa-fw" aria-hidden="true"></i>Cette mission vous intéresse ?</h3>
					<p>Cliquez sur le bouton "Intéressé" pour postuler. Sinon, cliquez sur "Pas intéressé" pour faire disparaître la mission de la liste.</p>

					{{#if userHasAnswered }}
					<p><strong><span class="glyphicon glyphicon-thumbs-{{ getAnswerClass }}" aria-hidden="true"></span>&nbsp;{{ getAnswerText }}</strong></p>
					{{else}}
					<h3>
						<a id="interested" class="btn btn-primary" href="#" role="button"><i class="fa fa-thumbs-up" aria-hidden="true"></i> Intéressé</a>
						<a id="notinterested" class="btn btn-default" href="#" role="button"><i class="fa fa-thumbs-down" aria-hidden="true"></i> Pas intéressé</a>
					</h3>
					{{/if}}
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<p><span class="glyphicon glyphicon-info-sign" aria-hidden="true"></span>&nbsp;{{ getInterestedUsersText }}</p>
				</div>
			</div>
			{{else}}
			{{#if isAdmin }}
			<!--<p class="text-danger"><i class="fa fa-exclamation-circle" aria-hidden="true"></i> Impossible de posulter aux offres en tant qu'administrateur.</p>-->
			<hr />
			{{else}}
			<p><i class="fa fa-lock" aria-hidden="true"></i> Il n'est plus possible de postuler pour cette offre de mission.</p>
			{{/if}}
			{{/if}}

			{{#if isAdmin }}
			<h4>Journal des actions réalisées sur cette mission</h4>
			<ul>
				{{#each actions}}
				{{>action}}
				{{/each}}
			</ul>
			{{/if}}

		</div>

	</div>


</template>

<template name="assignUser">
	<a href="#" class="btn assign-user"><i class="fa fa-briefcase" aria-hidden="true"></i> Affecter</a>
</template>